<div id="admin">

<div ng-if="currentTest" class="algorithms">
	
	<div>
		<h3>Current Test</h3>
		<div class="test-name">
			<b>Label: </b> {{currentTest.label}}
			<br>
			<b>Date : </b> {{currentTest.datedebut}}
			<br>
			<b>Mode : </b> {{currentTest.mode}}
			<br>
			<b>Number of groups : </b> {{currentTest.groups}}
			<br>
			<div ng-repeat="group in currentTest.idgroup">
				Group {{group.numero}} algorithms :

					<li ng-repeat="algo in group.idalgorithm">
						{{algo.nom}}
					</li>
				</ul>
			</div>
		</div>
		<button ng-click="endTest(currentTest.id)">End test</button>
	</div>


</div>

<div ng-if="!currentTest" class="newTest algorithm">
	<h3>New Test</h3>
	<div class="test-name">
		Label :  
		    <input class="value-limit" ng-model="newTest.label" type="text" class="form-control input-new-playlist" placeholder="New label" aria-describedby="basic-addon1" ng-new-playlist />

	</div>
	<div class="test-mode">


		Mode : <select ng-model="newTest.mode" ng-options="mo.Mode as mo.Label for mo in modes" ng-change="changeMode(modes)">
			<option value="" selected>Select a mode</option>
			     
		</select>

		
	</div>

	<div class="test-groups">
		<input class="nb-groups" ng-model="nbGroups" type="text" class="form-control input-new-playlist" placeholder="Number of groups" aria-describedby="basic-addon1"></input>
		<button ng-click="testGroups(nbGroups)">Generate groups</button>
		<div class="col-lg-6">
			  <p class="alert alert-danger" ng-show="!genGroups">There will be too few users per group</p>
		</div>

		<div ng-repeat="(groupIndex, group) in newTest.groups">Group number : {{group.numero}}
			<div ng-repeat="(algoIndex, algo) in group.algos">
				Algorithm : 
				<select ng-model="al" ng-options="al.id as al.nom for al in listAlgos" ng-change="changeAlgo(al, algo, $index)">
					<option value="" selected>Select an algorithm</option>
				</select>
				<a ng-click="removeAlgo(algo, groupIndex, algoIndex)">Remove algorithm</a>
			</div>
			<a ng-click="addAlgo($index)">Add an algorithm</a>
		</div>
	</div>
	<button ng-click="saveTest()">Create test</button>
	<div class="col-lg-6">
			  <p class="alert alert-danger" ng-show="!complete">Some infos are missing</p>
		</div>

</div>

</div>




